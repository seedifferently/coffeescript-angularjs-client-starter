doctype html
html.no-js(lang="en", ng-app="starter")
  head
    title Starter
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge")
    meta(name="description", content="")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    // Latest compiled and minified Bootstrap CSS
    link(rel="stylesheet", href="/vendor/bootstrap/dist/css/bootstrap.min.css")
    link(rel="stylesheet", href="/css/application.css")
    // HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
    // WARNING: Respond.js doesn't work if you view the page via file://
    //
      [if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]
  body(role="document", ng-controller="AppCtrl as app")
    #wrap
      // Navbar
      nav.navbar.navbar-default(role="navigation", ng-controller="HeaderCtrl as header")
        .container-fluid
          // Brand and toggle get grouped for better mobile display
          .navbar-header
            button.navbar-toggle(type="button", data-toggle="collapse", data-target="#bs-navbar-collapse")
              span.sr-only Toggle navigation
              span.icon-bar
              span.icon-bar
              span.icon-bar
            a.navbar-brand(href="#/") Starter
          // Collect the nav links, forms, and other content for toggling
          #bs-navbar-collapse.collapse.navbar-collapse
            ul.nav.navbar-nav
              li
                a(href="#/") Home
              li
                a(href="#/about.html") About
              li(ng-if="app.currentUser().role === 'admin'")
                a(href="#/admin/") Admin
            .nav.navbar-nav.navbar-right
              span(ng-if="!app.isAuthenticated() && app.currentPath() != '/users/login.html'")
                a.btn.btn-default.navbar-btn(href="#/users/login.html") Login
              span(ng-if='app.isAuthenticated()')
                a(href="#/users/me.html", ng-bind='app.currentUser().email')
                &nbsp;|&nbsp;
                a.btn.btn-default.navbar-btn(ng-click="header.logout()") Logout
          // /.navbar-collapse
        // /.container-fluid
      // Begin page content
      .container(role="main")
        // Flash container
        div.row(ng-if='flashMessage')
          // Bootstrap 3 flash levels are: info, success, warning, danger
          div#flash-message.alert(ng-class='flashClass', ng-bind='flashMessage')

        // AngualrJS view
        div(ng-view="")

      // Bottom spacer
      div &nbsp;
    // Begin footer
    #footer(role="footer", ng-controller="FooterCtrl as footer")
      .container
        p.text-muted &copy; 2014

    // Progress modal
    .modal#progress-modal(tabindex='-1', role='dialog', aria-hidden='true')
      .modal-dialog
        .modal-content
          .progress
            .progress-bar.progress-bar-striped.active(role='progressbar', aria-valuenow='100', aria-valuemin='0', aria-valuemax='100', style='width: 100%;')
              span.sr-only Loading...

    // Lo-Dash
    script(src="/vendor/lodash/dist/lodash.min.js")
    // jQuery
    script(src="/vendor/jquery/dist/jquery.min.js")
    // Latest compiled and minified Bootstrap JavaScript
    script(src="/vendor/bootstrap/dist/js/bootstrap.min.js")
    // AngualrJS
    script(src="/vendor/angular/angular.js")
    // Components
    script(src="/vendor/angular-route/angular-route.min.js")
    script(src="/vendor/angular-base64/angular-base64.min.js")
    script(src="/vendor/angular-local-storage/dist/angular-local-storage.min.js")
    script(src="/vendor/restangular/dist/restangular.min.js")
    // Starter App
    script(src="app.js")
    script(src="js/application.js")
